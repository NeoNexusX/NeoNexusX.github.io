<!DOCTYPE html><html class="appearance-auto" lang="chinese"><head><meta charset="UTF-8"><title>Pytorch--基础指北_伍</title><meta name="description" content="YOU CAN REDO"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q || []).push(arguments)},i[r].l=1 * new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'G-E0GBC11CTD', 'neonexusx.github.io');
ga('send', 'pageview');</script><!-- End Google Analytics -->
<!-- Baidu Analytics --><script>var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "//hm.baidu.com/hm.js?" + '1c102c8d6549c8317b34036a36f85904';
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();</script><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="Pytorch ——基础指北_伍



软件环境：
基础知识：

python 的异常触发
python 的列表解析
Python的DataFrame
Python的enumerate


Pytorch的数据加载

如何导入数据并转换为Dataset（数据集）？


数据集的迭代与操作

如何使用Dataloader呢？
* 到这里所有的内容就都完成了。




[TOC]
软件环境：

pytorch 1.10
pycharm

基础知识：
python 的异常触发
我们可以使用raise语句自己触发异常
raise语法格式如下：
raise [Exception [, args [, traceback]]]

语句中 Exception 是异常的类型（例如，NameError）参数标准异常中任一种，.."><script src="//unpkg.com/valine/dist/Valine.min.js"></script><meta name="generator" content="Hexo 7.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">NeoNexus's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Pytorch--基础指北_伍</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">Pytorch ——基础指北_伍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">软件环境：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">基础知识：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">python 的异常触发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">python 的列表解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">Python的DataFrame</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">Python的enumerate</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">Pytorch的数据加载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">如何导入数据并转换为Dataset（数据集）？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">数据集的迭代与操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">如何使用Dataloader呢？</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">到这里所有的内容就都完成了。</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Pytorch"><i class="tag post-item-tag">Pytorch</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Pytorch--基础指北_伍</h1><time class="has-text-grey" datetime="2024-09-27T16:00:00.000Z">2024-09-28</time><article class="mt-2 post-content"><h1><span id="pytorch-基础指北_伍">Pytorch ——基础指北_伍</span></h1>
<img src="https://s2.loli.net/2023/09/18/zXu5EpoCmKH8FiJ.jpg" alt="标准监督" style="zoom:67%;">
<!-- toc -->
<ul>
<li><a href="#%E8%BD%AF%E4%BB%B6%E7%8E%AF%E5%A2%83">软件环境：</a></li>
<li><a href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">基础知识：</a>
<ul>
<li><a href="#python-%E7%9A%84%E5%BC%82%E5%B8%B8%E8%A7%A6%E5%8F%91">python 的异常触发</a></li>
<li><a href="#python-%E7%9A%84%E5%88%97%E8%A1%A8%E8%A7%A3%E6%9E%90">python 的列表解析</a></li>
<li><a href="#python%E7%9A%84dataframe">Python的DataFrame</a></li>
<li><a href="#python%E7%9A%84enumerate">Python的enumerate</a></li>
</ul>
</li>
<li><a href="#pytorch%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD">Pytorch的数据加载</a>
<ul>
<li><a href="#%E5%A6%82%E4%BD%95%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%B9%B6%E8%BD%AC%E6%8D%A2%E4%B8%BAdataset%E6%95%B0%E6%8D%AE%E9%9B%86">如何导入数据并转换为Dataset（数据集）？</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E8%BF%AD%E4%BB%A3%E4%B8%8E%E6%93%8D%E4%BD%9C">数据集的迭代与操作</a>
<ul>
<li><a href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8dataloader%E5%91%A2">如何使用Dataloader呢？</a><br>
* <a href="#%E5%88%B0%E8%BF%99%E9%87%8C%E6%89%80%E6%9C%89%E7%9A%84%E5%86%85%E5%AE%B9%E5%B0%B1%E9%83%BD%E5%AE%8C%E6%88%90%E4%BA%86">到这里所有的内容就都完成了。</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<p>[TOC]</p>
<h2><span id="软件环境">软件环境：</span></h2>
<ul>
<li><strong>pytorch 1.10</strong></li>
<li><strong>pycharm</strong></li>
</ul>
<h2><span id="基础知识">基础知识：</span></h2>
<h3><span id="python-的异常触发">python 的异常触发</span></h3>
<p>我们可以使用raise语句自己触发异常</p>
<p>raise语法格式如下：</p>
<pre><code>raise [Exception [, args [, traceback]]]
</code></pre>
<p>语句中 Exception 是异常的类型（例如，NameError）参数标准异常中任一种，args 是自已提供的异常参数。最后一个参数是可选的（在实践中很少使用），如果存在，是跟踪异常对象。如果你不懂异常没关系，只要知道是主动的报告代码运行错误就可以。</p>
<h3><span id="python-的列表解析">python 的列表解析</span></h3>
<p>根据已有列表，高效创建新列表的方式。</p>
<p>列表解析（list comprehension）提供了一种优雅的生成列表的方法，能用一行代码代替十几行代码，而且不损失任何可读性。<strong>而且，性能还快很多很多</strong>（50%）。</p>
<p>它的基本结构是：</p>
<pre><code class="language-python">[expr for iter_var in iterable if cond_expr]#表达式+for循环+条件表达式
</code></pre>
<p>构建完成后返回一个list列表，对于第一个表达式甚至可以加入 if else。</p>
<p>举个例子：</p>
<pre><code class="language-python">numbers = [1,2,3,4,5,6,11,12]
&gt;&gt;&gt;max=10
&gt;&gt;&gt;[ i for i in numbers if i &gt;max ]
&gt;&gt;&gt;[11, 12]
</code></pre>
<p>通过表达式返回大于10的所有数据。</p>
<pre><code class="language-python">PyDev console: starting.
Python 3.8.12 (default, Oct 12 2021, 03:01:40) [MSC v.1916 64 bit (AMD64)] on win32
&gt;&gt;&gt;numbers = [1,2,3,4,5,6,7,89]
#返回大于5的构成的列表。
&gt;&gt;&gt;[i if i &gt;5 else 0  for i in numbers]
&gt;&gt;&gt;[0, 0, 0, 0, 0, 6, 7, 89]
&gt;&gt;&gt;[i if i &gt;5 else None  for i in numbers]
&gt;&gt;&gt;[None, None, None, None, None, 6, 7, 89]
#小于5增加100返回
[i if i &gt;5 else i+100  for i in numbers]
[101, 102, 103, 104, 105, 6, 7, 89]
</code></pre>
<h3><span id="python的dataframe">Python的DataFrame</span></h3>
<p>DataFrame是一种表格型数据结构。通过行和列的索引可以快速定位数据位置。</p>
<p><img src="https://s2.loli.net/2024/09/29/D4921OnZizHMUTw.png" alt="img"></p>
<pre><code class="language-python">pandas.DataFrame( data, index, columns, dtype, copy)
</code></pre>
<ul>
<li><strong>data</strong>：一组数据(ndarray、series, map, lists, dict 等类型)。</li>
<li><strong>index</strong>：索引值，或者可以称为行标签。</li>
<li><strong>columns</strong>：列标签，默认为 RangeIndex (0, 1, 2, …, n) 。</li>
<li><strong>dtype</strong>：数据类型。</li>
<li><strong>copy</strong>：拷贝数据，默认为 False。</li>
</ul>
<p>样例：</p>
<pre><code class="language-python">data = [['zzy', 3], ['jszszzy', 6], ['zzys', 4]]
df = pd.DataFrame(data, columns=['name', 'length'])
print(df)
</code></pre>
<p>结果：</p>
<pre><code class="language-shell">      name  length
0      zzy       3
1  jszszzy       6
2     zzys       4
</code></pre>
<p>如果想访问行可以这样：</p>
<pre><code class="language-python">print(df.loc[0])
</code></pre>
<p>访问某两行：</p>
<pre><code class="language-python">print(df.loc[[0, 1]])
&gt;&gt;&gt;     
	   name  length
0      zzy       3
1  jszszzy       6
#此时相当于一个小DataFrame
</code></pre>
<p>访问某一列：</p>
<pre><code class="language-python">print(df["name"])
&gt;&gt;&gt;
0        zzy
1    jszszzy
2       zzys
</code></pre>
<p>同时限定行和列：</p>
<pre><code class="language-python">print(df.iloc[0:1,0])
&gt;&gt;&gt;
0    zzy
Name: name, dtype: object
</code></pre>
<p>可以看到同时支持列号和行号。</p>
<pre><code class="language-python">print(df.shape)
&gt;&gt;&gt;
(3, 2)
</code></pre>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=shape&amp;spm=1001.2101.3001.7020">shape</a>函数，返回的是元组（不可变的列表）</p>
<ul>
<li>hg.shape返回的是hg的行数和列数</li>
<li>hg.shape[0]返回的是hg的行数，有几行</li>
<li>hg.shape[1]返回的是hg的列数，有几列</li>
</ul>
<h3><span id="python的enumerate">Python的enumerate</span></h3>
<p>enumerate() 函数用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标，一般用在 for 循环当中。</p>
<pre><code class="language-python">enumerate(sequence, [start=0])
</code></pre>
<ul>
<li>sequence – 一个序列、迭代器或其他支持迭代对象。</li>
<li>start – 下标起始位置的值。</li>
</ul>
<p>我们需要输出下标的同时输出内容时可以使用它：</p>
<pre><code class="language-shell">&gt;&gt;&gt; seq = ['one', 'two', 'three']
&gt;&gt;&gt; for i, element in enumerate(seq):
...     print i, element
...
0 one
1 two
2 three
</code></pre>
<h2><span id="pytorch的数据加载">Pytorch的数据加载</span></h2>
<p>为什么使用数据加载？在前面几节课我们知道函数关系的情况下可以随机生成数据集，每次训练的时候直接把所有数据都送进去进行加载是不现实的，当数据量巨大的时候你的显存可能撑不住，所以我们就需要一个工具类来实现对数据集的管理，<code>torch.utils.data.dataset，dataloader</code>就是这样的类，通过继承这个类并将里面的内容重写，我们能非常方便的实现对数据集的操作。</p>
<p>首先我们需要下载数据集：</p>
<p><a target="_blank" rel="noopener" href="http://archive.ics.uci.edu/ml/datasets/SMS+Spam+Collection">数据集下载</a></p>
<p>下载解压后放到目录中：</p>
<p><img src="https://s2.loli.net/2024/09/29/TpkcJNUbgjiBznm.png" alt="1"></p>
<h4><span id="如何导入数据并转换为dataset数据集">如何导入数据并转换为Dataset（数据集）？</span></h4>
<p>首先我们需要将这个类引用过来：</p>
<pre><code class="language-python">from caffe2.python.dataset import Dataset
</code></pre>
<p>引用以后还需要将其内部的三个方法实现以便于使用：</p>
<pre><code class="language-python">class Mydataset(Dataset):
    def __init__(self):
    #初始化构造数据集
    def __getitem__(self,index):
    #获取元素    
    def __len__(slef):
    #获取数据总长度   
</code></pre>
<p>下面展示一下如何实现一个<strong>Dataset</strong></p>
<p>首先是初始化数据集，实现内部三个方法：</p>
<p>首先是初始化：</p>
<pre><code class="language-python">    def __init__(self):
        lines = open(data_path, "rb")
        lines = [[i[:4].strip(), i[4:].strip()] for i in lines]#分割数据去除内部空格等冗余信息
        self.df = pd.DataFrame(lines, columns=["label", "sms"])#调整行标
</code></pre>
<p>​	初始化的思路很简单就是将每组数据结合起来然后转化成DataFrame的形式。</p>
<p>再就是__ getitem__方法：</p>
<pre><code class="language-python">    def __getitem__(self, index):
        item = self.df.iloc[index,:]
        return item.values[0],item.values[1]
    #这里是获取DataFrame的内容·，返回为字典，调用values分解
</code></pre>
<p>最后是__ len__方法：</p>
<pre><code class="language-python">    def __len__(self):
        return self.df.shape[0]
    #这里使用了DataFrame的shape方法获取行数。
</code></pre>
<h2><span id="数据集的迭代与操作">数据集的迭代与操作</span></h2>
<p>通过Dataset我们成功地将一个文本数据导入并对其进行了处理成功转化成一个通用的数据集类。但是我们还有很多操作没有实现：</p>
<ul>
<li>批处理数据（Batching the data）</li>
<li>打乱数据（Shuffling the data）</li>
<li>使用多线程 <code>multiprocessing</code> 并行加载数据。</li>
<li>对多余的数据进行处理<code>drop_last</code></li>
</ul>
<p>在pytorch中如何对数据集进行操作呢？</p>
<p>这就来到了Dataloader类：</p>
<h3><span id="如何使用dataloader呢">如何使用Dataloader呢？</span></h3>
<p>使用很简单：</p>
<pre><code class="language-python"> mydataloader = DataLoader(dataset=mydataset, batch_size=10, shuffle=True, num_workers=2)
</code></pre>
<p>调用其类的初始化来实例化对象，产生一个mydataloader，在实例化的过程中通过参数来调整数据集。</p>
<p>dataset就是需要操作的dataset对象，</p>
<p>drop_last就是没批的数据大小，</p>
<p>shuffle是否进行随机打乱处理，</p>
<p>num_workers是多线程加载数据集的数量，</p>
<p>drop_last是是否进行丢去数据集的零头，因为数据数量对batch_size来说总不是一定能整除的最后一组可能并不能占满。</p>
<pre><code class="language-python">mydataloader = DataLoader(dataset=mydataset, batch_size=10, shuffle=True, num_workers=3, drop_last=True)
</code></pre>
<p>那么我们该怎么查看修改后的数据集呢？</p>
<p>这里需要说明的是，在构造数据的时候我们采用的是两种为一组的方式，也就是：</p>
<p><strong>标签+数据内容</strong>，在迭代输出的时候也要将两个数据都取出来，你可以直接迭代：</p>
<pre><code class="language-python">    for label in mydataloader:
        print(label)
</code></pre>
<p>输出：</p>
<pre><code class="language-shell">[('ham', 'ham', 'ham', 'ham', 'ham', 'ham', 'spam', 'ham', 'spam', 'ham'), ('Only saturday and sunday holiday so its very difficult:)', "Oh right, ok. I'll make sure that i do loads of work during the day!  got a really nasty cough today and is dry n shot so that should really help it!", "That's one of the issues but california is okay. No snow so its manageable", "How have your little darlings been so far this week? Need a coffee run tomo?Can't believe it's that time of week already …", "Don't fret. I'll buy the ovulation test strips and send them to you. You wont get them til like march. Can you send me your postal address.u'll be alright.Okay.", 'Ok anyway no need to change with what you said', 'PRIVATE! Your 2004 Account Statement for 07742676969 shows 786 unredeemed Bonus Points. To claim call 08719180248 Identifier Code: 45239 Expires', "That's the trouble with classes that go well - you're due a dodgey one … Expecting mine tomo! See you for recovery, same time, same place", 'FREE for 1st week! No1 Nokia tone 4 ur mobile every week just txt NOKIA to 8077 Get txting and tell ur mates. www.getzed.co.uk POBox 36504 W45WQ 16+ norm150p/tone', 'After completed degree. There is no use in joining finance.')]
****************************************************************************************************
[('ham', 'ham', 'ham', 'ham', 'spam', 'spam', 'ham', 'ham', 'ham', 'ham'), ('I only work from mon to thurs but Sat i cant leh... Booked liao... Which other day u free?', 'Do I? I thought I put it back in the box', 'Dont search love, let love find U. Thats why its called falling in love, bcoz U dont force yourself, U just fall and U know there is smeone to hold U... BSLVYL', 'Long after I quit. I get on only like 5 minutes a day as it is.', 'URGENT! We are trying to contact U. Todays draw shows that you have won a £2000 prize GUARANTEED. Call 09058094507 from land line. Claim 3030. Valid 12hrs only', 'Camera - You are awarded a SiPix Digital Camera! call 09061221066 fromm landline. Delivery within 28 days.', 'Ok...', 'Tmrw. Im finishing 9 doors', 'Love it! The girls at the office may wonder why you are smiling but sore...', '"YEH I AM DEF UP4 SOMETHING SAT,JUST GOT PAYED2DAY &amp; I HAVBEEN GIVEN A£50 PAY RISE 4MY WORK &amp; HAVEBEEN MADE PRESCHOOLCO-ORDINATOR 2I AM FEELINGOOD LUV"')]
****************************************************************************************************
</code></pre>
<p>可以看到每一组数据其实分开了两部分并组合成一个list，list里面是根据batch_size 大小构成的两个元组。</p>
<p>当然你也可以这样迭代，就直接会拆分成两个元组，用起来很方便。</p>
<pre><code class="language-python">    for (label, sms) in mydataloader:
        print(label, sms)
        print("*" * 100)#分隔符
</code></pre>
<h6><span id="到这里所有的内容就都完成了">到这里所有的内容就都完成了。</span></h6>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2024/09/28/pytorch_6/" title="Pytorch--基础指北_陆"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: Pytorch--基础指北_陆</span></a><a class="button is-default" href="/2024/09/28/pytorch_7/" title="Pytorch--基础指北_柒"><span class="has-text-weight-semibold">Next: Pytorch--基础指北_柒</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container" id="vcomments" data-comment_valine_id="hUPsiqArOXp6TNWbIGsRugoz-gzGzoHsz" data-comment_valine_key="bMOEIPDsFffDM5KYhZcZFDwr"></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/NeoNexusX"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> NeoNexus 2025</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span>Puravida & FreeWill</span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script><script type="text/javascript">window.MathJax = {
  tex: {
    inlineMath: [['$', '$']],
    displayMath: [['$$', '$$']],
    processEscapes: true,
    tags: 'ams' // 如果需要支持自动编号
 },
  options: {
    skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    enableMenu: true,
  },
  startup: {
    ready: () => {
      MathJax.startup.defaultReady();
      MathJax.startup.promise.then(() => {
        // 处理公式渲染完成后的回调函数
        document.querySelectorAll('.MathJax').forEach((el) => {
          el.parentNode.classList.add('has-jax');
        });
      });
    }
  }
};</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script><script>function initMermaid() {
  if (window.mermaid) {
    mermaid.initialize({ theme: 'forest' });
  }
}</script></body></html>